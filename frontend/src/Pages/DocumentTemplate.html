<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LawSetu | Document Templates</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' };
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    .toggle-wrapper {
      background-color: #d1d5db;
      transition: background-color 0.3s ease-in-out;
    }
    .toggle-on {
      background-color: #6366f1;
    }
    .toggle-ball {
      transform: translateX(0);
      transition: transform 0.3s ease-in-out;
    }
    .toggle-ball-on {
      transform: translateX(100%);
    }
  </style>
</head>
<body id="body" class="min-h-screen bg-gradient-to-b from-white to-indigo-600 text-gray-800 transition-all duration-300">
  <header class="bg-white shadow-md py-4 px-6 flex justify-between items-center">
    <h1 class="text-2xl font-bold text-indigo-600">LawSetu</h1>
    <div class="flex items-center gap-4">
      <a href="#" class="text-indigo-600 hover:underline">Dashboard</a>
      <a href="#" class="text-indigo-600 hover:underline">Logout</a>
    </div>
  </header>
  <div class="flex flex-col md:flex-row p-6 gap-6">
    <aside class="md:w-1/4 rounded-lg shadow p-4 bg-white text-black dark:bg-gray-900 dark:text-white">
      <h2 class="text-lg font-semibold mb-4">Templates</h2>
      <input type="text" placeholder="Search templates..." class="border rounded w-full px-3 py-2 mb-3 bg-white text-black dark:bg-gray-700 dark:text-white dark:border-gray-600" />
      <ul class="space-y-2">
        <li><a href="#" class="block px-3 py-2 rounded hover:bg-indigo-100 text-black dark:text-white dark:hover:bg-indigo-800">NDA Agreement</a></li>
        <li><a href="#" class="block px-3 py-2 rounded hover:bg-indigo-100 text-black dark:text-white dark:hover:bg-indigo-800">Employment Contract</a></li>
        <li><a href="#" class="block px-3 py-2 rounded hover:bg-indigo-100 text-black dark:text-white dark:hover:bg-indigo-800">Lease Agreement</a></li>
      </ul>
      <div class="mt-6 flex flex-col gap-2">
        <button id="manual-template-btn" class="bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700">+ New Template (Manual)</button>
        <button id="ai-generate-btn" class="bg-indigo-100 text-indigo-700 py-2 rounded hover:bg-indigo-200 dark:bg-indigo-900 dark:text-indigo-200">ðŸ¤– Generate with AI</button>
        <button id="add-clause-btn" class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded hover:bg-indigo-200 dark:bg-indigo-900 dark:text-indigo-200">+ Add Confidentiality Clause</button>
      </div>
    </aside>
    <main class="flex-1 bg-white rounded-lg shadow p-6 dark:bg-gray-900 dark:text-white">
      <div class="flex justify-end mb-4">
        <div id="toggle-wrapper" class="w-14 h-7 rounded-full flex items-center px-1 toggle-wrapper cursor-pointer relative">
          <div id="toggle-ball" class="w-5 h-5 bg-white rounded-full toggle-ball"></div>
        </div>
      </div>
      <input type="text" id="doc-title" placeholder="Document Title" class="border px-3 py-2 rounded w-full mb-4 bg-white text-black dark:bg-gray-700 dark:text-white dark:border-gray-600" />
      <h2 class="text-xl font-bold mb-4 text-indigo-600 dark:text-indigo-400">Document Editor</h2>
      <textarea id="editor" class="w-full h-96 p-4 border rounded-lg bg-white text-black border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 dark:bg-gray-800 dark:text-white dark:border-gray-600" placeholder="Start drafting your legal document here..."></textarea>
      <div class="mt-2 flex justify-between items-center">
        <span id="save-status" class="text-sm text-gray-500 dark:text-gray-300">Saved</span>
        <div class="flex gap-2">
          <button class="bg-indigo-500 text-white px-4 py-2 rounded" id="export-pdf-btn">Export as PDF</button>
          <button class="bg-indigo-600 text-white px-6 py-2 rounded hover:bg-indigo-700" id="save-doc-btn">Save Document</button>
        </div>
      </div>
    </main>
  </div>
  <div id="ai-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50">
    <div class="bg-white rounded-lg p-6 w-full max-w-md shadow-lg">
      <h3 class="text-lg font-semibold mb-2 text-indigo-700">AI Document Generator</h3>
      <p class="mb-3 text-sm text-gray-600">Describe what you want:</p>
      <input type="text" id="ai-input" placeholder="e.g., Generate an NDA for a startup" class="w-full border px-3 py-2 rounded mb-4" />
      <div class="flex justify-end gap-2">
        <button id="cancel-ai" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">Cancel</button>
        <button id="generate-ai" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">Generate</button>
      </div>
    </div>
  </div>
  <script>
    const root = document.documentElement;
    const toggleWrapper = document.getElementById('toggle-wrapper');
    const toggleBall = document.getElementById('toggle-ball');
  
    function setToggleUI(isDark) {
      toggleWrapper.classList.toggle("toggle-on", isDark);
      toggleBall.classList.toggle("toggle-ball-on", isDark);
    }
  
    // Ensure default is light mode unless already saved as dark
    let storedTheme = localStorage.getItem("lawsetu-theme");
    if (storedTheme === "dark") {
      root.classList.add("dark");
      setToggleUI(true);
    } else {
      root.classList.remove("dark");
      localStorage.setItem("lawsetu-theme", "light");
      setToggleUI(false);
    }
  
    toggleWrapper.addEventListener("click", () => {
      const isCurrentlyDark = root.classList.contains("dark");
      root.classList.toggle("dark");
      localStorage.setItem("lawsetu-theme", isCurrentlyDark ? "light" : "dark");
      setToggleUI(!isCurrentlyDark);
    });
  
    const editor = document.getElementById('editor');
    const titleInput = document.getElementById('doc-title');
    const saveStatus = document.getElementById('save-status');
  
    window.onload = () => {
      editor.value = localStorage.getItem('lawsetu-draft') || '';
      titleInput.value = localStorage.getItem('lawsetu-title') || '';
    };
  
    document.getElementById('save-doc-btn').addEventListener('click', () => {
      localStorage.setItem('lawsetu-draft', editor.value);
      localStorage.setItem('lawsetu-title', titleInput.value);
      saveStatus.textContent = 'Document manually saved';
    });
  
    editor.addEventListener('input', () => {
      saveStatus.textContent = 'Saving...';
      clearTimeout(window.saveTimeout);
      window.saveTimeout = setTimeout(() => {
        localStorage.setItem('lawsetu-draft', editor.value);
        localStorage.setItem('lawsetu-title', titleInput.value);
        saveStatus.textContent = 'Saved';
      }, 1000);
    });
  
    document.getElementById('manual-template-btn').addEventListener('click', () => {
      editor.value = '';
      titleInput.value = '';
      saveStatus.textContent = 'Draft cleared';
    });
  
    const templates = {
      "NDA Agreement": "This NDA Agreement is made on [Date] between [Party A] and [Party B].\n\n[Insert NDA clauses here...]",
      "Employment Contract": "This Employment Contract is entered into on [Date] between Employer and Employee.\n\n[Insert employment terms here...]",
      "Lease Agreement": "This Lease Agreement is made effective as of [Date] between Landlord and Tenant.\n\n[Insert lease terms here...]"
    };
  
    document.querySelectorAll('.block.px-3.py-2').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const type = link.textContent.trim();
        titleInput.value = type;
        editor.value = templates[type] || '[Template content goes here...]';
        saveStatus.textContent = `"${type}" template loaded`;
      });
    });
  
    document.getElementById("add-clause-btn").addEventListener("click", () => {
      const clause = "\n\nConfidentiality:\nThe parties agree to maintain the confidentiality of all proprietary or sensitive information shared during the course of this agreement. Such information shall not be disclosed to any third party without prior written consent, except as required by law.";
      editor.value += clause;
      saveStatus.textContent = "Confidentiality clause added";
    });
  
    document.getElementById("ai-generate-btn").addEventListener("click", () => {
      document.getElementById("ai-modal").classList.remove("hidden");
      document.getElementById("ai-input").value = '';
    });
  
    document.getElementById("cancel-ai").addEventListener("click", () => {
      document.getElementById("ai-modal").classList.add("hidden");
    });
  
    document.getElementById("generate-ai").addEventListener("click", () => {
      const prompt = document.getElementById("ai-input").value.trim();
      if (prompt) {
        editor.value = `AI-generated document based on your request:\n"${prompt}"\n\n[Insert legal clauses here...]`;
        document.getElementById("ai-modal").classList.add("hidden");
        saveStatus.textContent = "AI-generated content inserted";
      }
    });
  
    document.getElementById("export-pdf-btn").addEventListener("click", () => {
      const content = editor.value;
      const title = titleInput.value || 'LawSetu_Document';
      const opt = {
        margin: 0.5,
        filename: `${title}.pdf`,
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
      };
      const tempElement = document.createElement('div');
      tempElement.innerHTML = `<h2>${title}</h2><pre style="font-family:sans-serif;white-space:pre-wrap;">${content}</pre>`;
      html2pdf().from(tempElement).set(opt).save();
    });
  </script>
  
</body>
</html>